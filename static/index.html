<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Chat App</title>
    <link rel="stylesheet" href="/styles.css">
    <link rel="stylesheet" href="/media.css">
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family:wght@300;400;500&display=swap">
</head>
<script>
    const token = localStorage.getItem("token");
    
    if(!token) {
        window.location.href = "/login/";
    }
</script>
<body>
    <header>
        <nav>
            <button id="loginBtn" class="nav-btn">Login</button>
            <button id="signupBtn" class="nav-btn">Sign Up</button>
            <button id="logoutBtn" class="nav-btn">Logout</button>
        </nav>
    </header>
    <main>
        <section class="container main">
            <ul class="messages" id="messages">
            </ul>
        </section>
        <form id="sendForm" class="form">
            <div class="name" id="currentUser"></div>
            <div class="functionality__block">
                <input type="text" placeholder="Write your message..." id="sendInput" class="send__input" required>
                <button type="submit" class="send__btn" id="sendBtn">Send</button>
            </div>
        </form>
    </main>
    <script src="/socket.io/socket.io.js"></script>
    <script src="/authFront.js"></script>
    <script src="/script.js"></script>
    <script>
        window.onload = () => {
            const loginBtn = document.getElementById("loginBtn");
            const signupBtn = document.getElementById("signupBtn");
            const logoutBtn = document.getElementById("logoutBtn");

            if (token) {
                // Logged in
                if (loginBtn) loginBtn.style.display = "none";
                if (signupBtn) signupBtn.style.display = "none";
                if (logoutBtn) logoutBtn.style.display = "block";
            } else {
                // Logged out
                if (logoutBtn) logoutBtn.style.display = "none";
                if (loginBtn) loginBtn.style.display = "block";
                if (signupBtn) signupBtn.style.display = "block";
            }
        }

    </script>
</body>
</html>